
# التثبيت والإعداد

يشرح هذا الدليل كيفية تثبيت وإعداد **bot-base/telegram-bot-template** لتشغيل روبوت تليجرام الخاص بك. اتبع الخطوات التالية بعناية لضمان أن كل شيء يعمل بشكل صحيح.

## المتطلبات الأساسية

قبل البدء، تأكد من أن لديك البرامج التالية مثبتة على نظامك:

-   **[Node.js](https://nodejs.org/):** إصدار `20.0.0` أو أحدث.
-   **[npm](https://www.npmjs.com/):** مدير حزم Node.js (يأتي مدمجًا مع Node.js).
-   **[Git](https://git-scm.com/):** نظام التحكم في الإصدارات (اختياري، لكن موصى به).

## خطوات التثبيت والإعداد

### الخطوة 1: الحصول على نسخة من القالب

أفضل طريقة للبدء هي إنشاء مستودع (repository) جديد من هذا القالب على GitHub.

1.  انتقل إلى صفحة القالب على GitHub: [bot-base/telegram-bot-template](https://github.com/bot-base/telegram-bot-template).
2.  انقر على زر **"Use this template"** لإنشاء مستودع جديد خاص بك بناءً على هذا القالب.
3.  بعد إنشاء المستودع، قم بنسخه (clone) إلى جهازك المحلي:

    ```bash
    git clone https://github.com/YOUR_USERNAME/YOUR_REPOSITORY_NAME.git
    cd YOUR_REPOSITORY_NAME
    ```

### الخطوة 2: تثبيت الاعتماديات (Dependencies)

بعد الدخول إلى مجلد المشروع، قم بتثبيت جميع الاعتماديات المطلوبة باستخدام `npm`:

```bash
npm install
```

سيقوم هذا الأمر بتنزيل جميع المكتبات والحزم اللازمة لتشغيل الروبوت.

### الخطوة 3: إعداد ملف البيئة (`.env`)

يستخدم القالب ملف `.env` لتخزين المتغيرات الحساسة والخاصة بالتهيئة. يجب عليك إنشاء هذا الملف وتكوينه.

1.  قم بنسخ ملف `.env.example` لإنشاء ملف `.env` جديد:

    ```bash
    cp .env.example .env
    ```

2.  افتح ملف `.env` الجديد في محرر النصوص المفضل لديك. سيبدو محتواه كالتالي:

    ```env
    # Bot
    BOT_TOKEN=""
    BOT_MODE="polling" # polling or webhook

    # Logger
    LOG_LEVEL="info"
    DEBUG="false"

    # Webhook
    # BOT_WEBHOOK=""
    # BOT_WEBHOOK_SECRET=""

    # Server
    # SERVER_HOST="0.0.0.0"
    # SERVER_PORT="80"

    # Other
    # BOT_ALLOWED_UPDATES='["message"]'
    # BOT_ADMINS='[]'
    ```

3.  **تكوين المتغيرات الأساسية:**

    -   `BOT_TOKEN`: هذا هو المتغير الأكثر أهمية. يجب عليك الحصول على توكن (token) خاص بروبوتك من **[@BotFather](https://t.me/BotFather)** على تليجرام. قم بلصق التوكن بين علامتي الاقتباس.
    -   `BOT_MODE`: يحدد طريقة استقبال التحديثات. الخيارات المتاحة هي:
        -   `polling` (الافتراضي): يقوم الروبوت بالاتصال بخوادم تليجرام بشكل دوري لجلب التحديثات. هذا الوضع مناسب للتطوير المحلي.
        -   `webhook`: يقوم تليجرام بإرسال التحديثات إلى عنوان URL (خادم ويب) تقوم بتحديده. هذا الوضع موصى به في بيئة الإنتاج.

4.  **تكوين المتغيرات الاختيارية (حسب الحاجة):**

    -   `LOG_LEVEL`: يحدد مستوى تسجيل الأنشطة (مثل `info`, `debug`, `error`).
    -   `DEBUG`: اضبطه على `true` لتمكين وضع التصحيح (debug mode)، الذي يوفر سجلات أكثر تفصيلاً.
    -   `BOT_ADMINS`: قائمة بمعرفات (IDs) حسابات تليجرام الخاصة بالمسؤولين. يمكن للمسؤولين الوصول إلى أوامر خاصة مثل `/setcommands`.

    إذا كنت تستخدم وضع `webhook`، فستحتاج أيضًا إلى تكوين `BOT_WEBHOOK` و`SERVER_PORT` وغيرها.

### الخطوة 4: تشغيل الروبوت

الآن بعد أن تم تكوين كل شيء، يمكنك تشغيل الروبوت.

-   **في وضع التطوير (Development Mode):**

    استخدم الأمر التالي. سيقوم هذا الأمر بمراقبة التغييرات في الكود وإعادة تشغيل الروبوت تلقائيًا.

    ```bash
    npm run dev
    ```

-   **في وضع الإنتاج (Production Mode):**

    أولاً، تأكد من تثبيت اعتماديات الإنتاج فقط (إذا كنت تريد ذلك):

    ```bash
    npm install --only=prod
    ```

    ثم قم بتشغيل الروبوت باستخدام الأمر التالي:

    ```bash
    npm run start
    ```

    إذا سارت الأمور على ما يرام، سترى رسالة في الطرفية (terminal) تفيد بأن الروبوت قيد التشغيل.

    ```
    {"level":30,"time":1678886400000,"msg":"Bot running...","username":"YourBotName_bot"}
    ```

الآن يمكنك الذهاب إلى تليجرام والبدء في التفاعل مع روبوتك!
