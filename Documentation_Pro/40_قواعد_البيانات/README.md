# 🗄️ قواعد البيانات - التوثيق الشامل

## 📋 نظرة عامة

هذا القسم يحتوي على توثيق كامل ومفصل لجميع أنظمة قواعد البيانات في المشروع.

---

## 📚 الأنظمة المتوفرة

### 1️⃣ [نظام الموظفين](./01_نظام_الموظفين/)
**الوصف:** نظام متكامل لإدارة بيانات الموظفين

**المحتويات:**
- ✅ EMPLOYEE_SCHEMA_FINAL.md - Schema النهائي الموصى به
- ✅ EMPLOYEE_SCHEMA_PROPOSAL.md - المقترحات والبدائل
- ✅ EMPLOYEE_SCHEMA_SIMPLIFIED.md - نسخة مبسطة
- ✅ README.md - دليل الاستخدام

**الميزات:**
- 40+ حقل شامل
- معلومات شخصية كاملة
- بيانات الوظيفة والراتب
- معلومات البنك والتأمينات
- بيانات جهات الاتصال للطوارئ
- سجل العقوبات والإجازات

**الحالة:** ✅ جاهز للتطبيق

---

### 2️⃣ [نظام المعدات](./02_نظام_المعدات/)
**الوصف:** إدارة شاملة للمعدات والآليات

**المحتويات:**
- ✅ EQUIPMENT_SYSTEM.md - التوثيق الكامل
- ✅ QUICK_START.md - دليل البدء السريع
- ✅ README.md - نظرة عامة

**الميزات:**
- 10 جداول متكاملة
- تتبع الصيانة (دورية وطارئة)
- نظام الورديات للسائقين
- سجل الوقود والتكاليف
- صيانة مجدولة تلقائية ⭐
- ربط مع المشاريع والموظفين

**الجداول:**
```
1. Equipment_Category
2. Equipment_Type
3. Equipment
4. Equipment_Maintenance
5. Equipment_Scheduled_Maintenance ⭐
6. Equipment_Usage
7. Equipment_Cost
8. Equipment_Fuel_Log
9. Equipment_Shift
10. Equipment_Shift_Assignment
```

**الحالة:** ✅ مكتمل ومطبق

---

### 3️⃣ [نظام المخازن](./03_نظام_المخازن/)
**الوصف:** إدارة متقدمة للمخزون والمواد

**المحتويات:**
- ✅ WAREHOUSE_SYSTEM.md - التوثيق الكامل
- ✅ QUICK_START.md - دليل البدء السريع
- ✅ README.md - نظرة عامة

**الميزات:**
- مخازن متعددة
- تصنيف المواد
- حركات المخزون
- عمليات النقل بين المخازن
- جرد دوري
- طلبات شراء
- باركود للأصناف

**الجداول:**
```
1. Warehouse
2. Warehouse_Category
3. Warehouse_Item
4. Warehouse_Movement
5. Warehouse_Transfer
6. Warehouse_Inventory
7. Warehouse_Purchase_Request
8. Warehouse_Barcode
9. Warehouse_Alert
10. Warehouse_Report
```

**الحالة:** ✅ مكتمل ومطبق

---

### 4️⃣ [نظام حساب التكاليف](./04_نظام_حساب_التكاليف/)
**الوصف:** حساب دقيق لتكاليف المشاريع

**المحتويات:**
- ✅ COST_SYSTEM.md - التوثيق الكامل
- ✅ QUICK_START.md - دليل البدء السريع
- ✅ README.md - نظرة عامة

**الميزات:**
- تكاليف العمالة
- تكاليف المواد
- تكاليف المعدات
- مصاريف إضافية
- تقارير تحليلية
- مقارنة التكاليف المتوقعة vs الفعلية

**الجداول:**
```
1. Cost_Category
2. Cost_Labor
3. Cost_Material
4. Cost_Equipment
5. Cost_Overhead
6. Cost_Summary
7. Cost_Report
```

**الحالة:** ✅ مكتمل ومطبق

---

### 5️⃣ [البيانات الأساسية](./05_البيانات_الأساسية/)
**الوصف:** البيانات الثابتة والمرجعية

**المحتويات:**
- ✅ DEPARTMENT_SETUP.md - إعداد الأقسام
- ✅ POSITION_SETUP.md - إعداد الوظائف
- ✅ GOVERNORATES_DATA.md - بيانات المحافظات المصرية
- ✅ README.md - دليل الاستخدام

**البيانات المتوفرة:**
- الشركات (Companies)
- الأقسام (Departments)
- الوظائف (Positions)
- المحافظات والمراكز المصرية (27 محافظة)
- البنوك
- التأمينات

**الحالة:** ✅ جاهز للاستيراد

---

### 6️⃣ [Schema الكامل](./06_Schema_الكامل/)
**الوصف:** ملف schema.prisma الموحد

**المحتويات:**
- ✅ schema.prisma - الملف الكامل الموثق
- ✅ migrations_guide.md - دليل الـ Migrations
- ✅ README.md - إرشادات الاستخدام

**يحتوي على:**
- جميع الجداول من كل الأنظمة
- العلاقات الكاملة
- Indexes محسّنة
- تعليقات توضيحية
- أمثلة على الاستخدام

**الحالة:** 🔄 قيد التحديث المستمر

---

## 🚀 البدء السريع

### للمطورين الجدد:
```bash
# 1. اقرأ نظرة عامة على النظام الذي تريد
cd 0X_نظام_المطلوب
cat README.md

# 2. راجع التوثيق الكامل
cat *_SYSTEM.md

# 3. ابدأ بدليل البدء السريع
cat QUICK_START.md

# 4. طبّق على قاعدة البيانات
npx prisma migrate dev
```

### لتطبيق نظام معين:
1. انسخ الجداول من ملف SYSTEM.md
2. ألصقها في `prisma/schema.prisma`
3. نفذ: `npx prisma migrate dev --name add_system_name`
4. راجع دليل QUICK_START للأمثلة

---

## 📊 العلاقات بين الأنظمة

```
المشاريع (Projects)
    ↓
    ├─→ الموظفين (Employees)
    ├─→ المعدات (Equipment)
    ├─→ المخازن (Warehouses)
    └─→ التكاليف (Costs)

الموظفين
    ├─→ الأقسام (Departments)
    ├─→ الوظائف (Positions)
    └─→ الشركات (Companies)

المعدات
    ├─→ الصيانة (Maintenance)
    ├─→ الورديات (Shifts)
    └─→ السائقين (Employees)

المخازن
    ├─→ الحركات (Movements)
    ├─→ المشاريع (Projects)
    └─→ المواد (Items)

التكاليف
    ├─→ المشاريع (Projects)
    ├─→ الموظفين (Labor)
    ├─→ المعدات (Equipment)
    └─→ المواد (Materials)
```

---

## 🎯 أفضل الممارسات

### عند إضافة نظام جديد:
1. ✅ **ابدأ بالتخطيط** - ارسم ERD للجداول
2. ✅ **راجع الأنظمة الموجودة** - لا تكرر العمل
3. ✅ **استخدم العلاقات** - اربط مع الجداول الأخرى
4. ✅ **أضف Indexes** - للبحث السريع
5. ✅ **وثّق جيداً** - اتبع نمط التوثيق الموجود
6. ✅ **اختبر** - تأكد من العلاقات والـ Constraints

### Naming Conventions:
```prisma
// ❌ خطأ
model equipment { ... }
model EquipmentMaintenance { ... }

// ✅ صحيح
model Equipment { ... }
model Equipment_Maintenance { ... }
```

---

## 📝 ملاحظات مهمة

### ⚠️ قبل Migration:
- احفظ نسخة احتياطية من قاعدة البيانات
- راجع ملف migration الذي سيُنشأ
- اختبر على بيئة تطوير أولاً

### 🔐 الأمان:
- لا تضع بيانات حساسة في Schema
- استخدم Environment Variables للبيانات السرية
- فعّل الـ Soft Delete بدلاً من الحذف النهائي

### 🎨 التوثيق:
- كل جدول يجب أن يحتوي على تعليقات
- استخدم أمثلة واقعية
- وثّق القيود والشروط

---

## 🔗 روابط سريعة

- [العودة للفهرس الرئيسي](../00_فهرس_رئيسي/)
- [دليل المطور](../10_دليل_المطور/)
- [أوامر Prisma](../50_أدلة_عملية/03_أوامر_Prisma_والصيانة.md)

---

## 📞 الدعم الفني

إذا واجهت مشاكل:
1. راجع [الأعطال الشائعة](../30_التشغيل_والنشر/02_الأعطال_الشائعة.md)
2. تحقق من صحة Schema: `npx prisma validate`
3. راجع سجل Migrations: `npx prisma migrate status`

---

**آخر تحديث:** أكتوبر 2025  
**المسؤول:** فريق التطوير  
**الحالة:** ✅ نشط ومحدّث
